"use strict";(self.webpackChunkpawl_frontend=self.webpackChunkpawl_frontend||[]).push([[889],{8889:(q,m,a)=>{a.r(m),a.d(m,{AddPetModule:()=>O});var l=a(9808),g=a(3257),i=a(3075),u=a(5620),h=a(882),_=a(2686),v=a(4749),b=a(4946),x=a(9779),e=a(5e3),Z=a(9850),y=a(9252),A=a(8852),c=a(4368),C=a(8454);function P(o,s){}function T(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("change",function(){const d=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.loadPetBreeds(d.id))}),e.TgZ(1,"label",52),e._UZ(2,"input",53)(3,"img",54),e.ALo(4,"image"),e.TgZ(5,"span",17),e._uU(6),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("for",t.attributes.name),e.xp6(1),e.Q6J("id",t.attributes.name)("value",t.id),e.xp6(1),e.Q6J("src",e.lcZ(4,5,null==t.attributes.icon.data||null==t.attributes.icon.data.attributes?null:t.attributes.icon.data.attributes.url),e.LSH),e.xp6(3),e.Oqu(t.attributes.name)}}function w(o,s){1&o&&e._uU(0,"Hola")}function F(o,s){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.attributes.name)}}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.MAs(46),d=e.oxw();return e.KtG(d.onSubmit(r))}),e.TgZ(1,"mat-horizontal-stepper")(2,"mat-step"),e.YNc(3,P,0,0,"ng-template",7),e.TgZ(4,"div",8)(5,"div",9),e._uU(6," Especie "),e.qZA(),e.TgZ(7,"div",10),e.YNc(8,T,7,7,"div",11),e.ALo(9,"async"),e.qZA()(),e.TgZ(10,"div",9),e._uU(11," Tama\xf1o "),e.qZA(),e.TgZ(12,"div",12)(13,"div",13)(14,"label",14),e._UZ(15,"input",15)(16,"img",16),e.TgZ(17,"span",17),e._uU(18," Chico"),e.qZA()()(),e.TgZ(19,"div",13)(20,"label",18),e._UZ(21,"input",19)(22,"img",20),e.TgZ(23,"span",17),e._uU(24," Mediano "),e.qZA()()(),e.TgZ(25,"div",13)(26,"label",21),e._UZ(27,"input",22)(28,"img",23),e.TgZ(29,"span",17),e._uU(30," Grande "),e.qZA()()()(),e.TgZ(31,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkPetBreed())}),e._uU(32,"Continuar"),e.qZA()(),e.TgZ(33,"mat-step"),e.YNc(34,w,1,0,"ng-template",7),e.TgZ(35,"div",25)(36,"span",26),e._uU(37," Fotograf\xeda"),e.qZA(),e.TgZ(38,"div",27)(39,"div",25)(40,"div",27),e._UZ(41,"img",28),e.TgZ(42,"div",29)(43,"div",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleIconClick())}),e._UZ(44,"img",31),e.qZA(),e.TgZ(45,"input",32,33),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.processImg())}),e.qZA()()()()()(),e.TgZ(47,"div",8)(48,"label",34),e._uU(49,"Nombre"),e.qZA(),e._UZ(50,"input",35),e.qZA(),e.TgZ(51,"div",8)(52,"label",36),e._uU(53,"Fecha de nacimiento"),e.qZA(),e.TgZ(54,"input",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkPetBreed())})("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.selectVaccineCard())}),e.qZA()(),e.TgZ(55,"div",8)(56,"label",38),e._uU(57,"Raza"),e.qZA(),e.TgZ(58,"select",39),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkPetBreed())}),e.TgZ(59,"option",40),e._uU(60,"Seleccione una raza"),e.qZA(),e.TgZ(61,"option",41),e._uU(62,"Mestizo"),e.qZA(),e.YNc(63,F,2,2,"option",42),e.qZA()(),e.TgZ(64,"p",26),e._uU(65,"Genero"),e.qZA(),e.TgZ(66,"div",8)(67,"select",43)(68,"option",44),e._uU(69,"Selecciona un genero"),e.qZA(),e.TgZ(70,"option",45),e._uU(71," Macho"),e.qZA(),e.TgZ(72,"option",46),e._uU(73," Hembra"),e.qZA()()(),e.TgZ(74,"div",47)(75,"div",48)(76,"button",49),e._uU(77,"Regresar"),e.qZA()(),e.TgZ(78,"div",48)(79,"button",50),e._uU(80,"Guardar"),e.qZA()()()()()()}if(2&o){const t=s.ngIf,n=e.oxw();e.Q6J("formGroup",n.addPetForm),e.xp6(8),e.Q6J("ngForOf",e.lcZ(9,6,n.petTypes$)),e.xp6(33),e.Q6J("src",n.localImg,e.LSH),e.xp6(18),e.Q6J("selected",!0),e.xp6(2),e.s9C("value",n.pet_type_id),e.xp6(2),e.Q6J("ngForOf",t.breeds)}}const N=function(o){return{breeds:o}},U=[{path:"",component:(()=>{class o{constructor(t,n,r,d){this.store=t,this.auth=n,this.shared=r,this.App=d,this.isLinear=!1,this.isChecked=!1,this.addPetForm=new i.cw({especie:new i.NI("",[i.kI.required]),size:new i.NI("",[i.kI.required]),name:new i.NI("",[i.kI.required]),dob:new i.NI("",[i.kI.required]),raza:new i.NI("",[i.kI.required]),genero:new i.NI("",[i.kI.required])})}ngOnInit(){console.log("NGONINIT ADD PET"),this.store.dispatch((0,_.id)()),this.breeds$=this.store.pipe((0,u.Ys)(b.$)),this.petTypes$=this.store.pipe((0,u.Ys)(x.T)),this.App.onActivate()}onSubmit(t){if(console.log("ONSUBMIT",this.addPetForm.value),this.addPetForm.invalid)return this.shared.sendAlert("warning","Formulario Invalido","Por favor, verifique los campos");this.store.dispatch((0,v.Ns)({pet:{name:this.addPetForm.controls.name.value,dob:this.addPetForm.controls.dob.value,gender:this.addPetForm.controls.genero.value,pet_size:this.addPetForm.controls.size.value,pet_type:this.addPetForm.controls.especie.value,pet_breed:this.addPetForm.controls.raza.value,user:this.auth.getUser().id,vaccine_card:{vaccine_card:this.vaccineCardType},dewormer:{vaccine_card:this.dewormerType}},img:t.files[0]}))}processImg(){const t=document.getElementById("inputFile");if(this.imageInput=t.files[0],!this.imageInput.type.includes("image"))return alert("no es una imagen");const n=new FileReader;return n.onload=r=>{this.localImg=n.result},n.readAsDataURL(this.imageInput)}handleIconClick(){document.getElementById("inputFile").click()}loadPetBreeds(t){this.store.dispatch((0,h.xQ)({pet_type_id:t})),this.isChecked=!0;const n=this.addPetForm.get("especie").value;console.log("Selected pet type:",n),"3"===n?(console.log("Pet type is dog"),this.pet_type_id=1):(console.log("Pet type is cat"),this.pet_type_id=2)}selectVaccineCard(){var t,n;const r=this.addPetForm.get("dob").value,d=new Date(r),p=new Date;if(d>p)return this.shared.sendAlert("warning","Error","La fecha de nacimiento debe ser anterior a la fecha actual"),null===(t=this.addPetForm.get("dob"))||void 0===t?void 0:t.reset();const k=p.getTime()-d.getTime(),f=Math.floor(k/6048e5);switch(this.pet_type_id){case 1:this.vaccineCardType=f<=17?1:3,this.dewormerType=6;break;case 2:this.vaccineCardType=f<=16?2:4,this.dewormerType=5;break;default:return this.shared.sendAlert("warning","Especie de mascota no eleccionada","Por favor seleccione una especie"),void(null===(n=this.addPetForm.get("dob"))||void 0===n||n.reset())}}checkPetBreed(){if(!1===this.isChecked)return this.shared.sendAlert("warning","Especie de mascota no seleccionada","Por favor seleccione una especie")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.yh),e.Y36(Z.e),e.Y36(y.F),e.Y36(A.z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-pet"]],decls:9,vars:5,consts:[[1,"content","content-margintop","rounded-3xl","w-full","mt-6","justify-center","box-shadow-base","ng-star-inserted"],[1,"py-4","px-10","grid","grid-cols-6"],[1,"col-span-6","font-bold","text-center","text-orange-400","text-3xl"],[1,"text-gray-400"],[1,"rounded-3xl","pyc-1","mx-6","h-2","justify-center","box-shadow-base"],["class","p-4",3,"formGroup","ngSubmit",4,"ngIf"],[1,"p-4",3,"formGroup","ngSubmit"],["matStepLabel",""],[1,"form-group"],[1,"w-full","text-center","font-bold","text-orange","my-4"],[1,"grid","grid-cols-2","gap-4"],["class"," col-auto ",3,"change",4,"ngFor","ngForOf"],[1,"form-group","grid","grid-cols-3","gap-4","h-32","relative","pt-8","pb-4"],[1,"relative","sizes"],["for","chico",1,"absolute","inset-x-0","bottom-0"],["id","chico","value","small","name","size","type","radio","formControlName","size"],["src","assets/pawprint.svg",1,"w-3/12","m-auto"],[1,"mx-auto","my-2","text-center","block","text-gray-400"],["for","mediano",1,"absolute","inset-x-0","bottom-0"],["id","mediano","value","medium","name","size","type","radio","formControlName","size"],["src","assets/pawprint.svg",1,"w-6/12","m-auto"],["for","grande",1,"absolute","inset-x-0","bottom-0"],["id","grande","value","large","name","size","type","radio","formControlName","size"],["src","assets/pawprint.svg",1,"w-9/12","m-auto"],["mat-button","","matStepperNext","","type","button",1,"single_add_button",3,"click"],[1,"mx-auto","w-52","text-center"],[1,"w-full","text-center","font-bold","text-orange","my-4","block"],[1,"relative","w-52"],["alt","assets\\icons\\imgupload.svg","onerror","this.src='assets/icons/imgupload.svg'",1,"w-52","h-52","rounded-full","absolute",3,"src"],[1,"w-52","h-52","group","hover:bg-gray-200","opacity-60","rounded-full","flex","justify-center","items-center","cursor-pointer","transition","duration-500"],[1,"w-full","h-full","flex","justify-center","items-center",3,"click"],["src","assets\\icons\\imgupload.svg",1,"hidden","group-hover:block","w-12"],["type","file","id","inputFile","accept","image/jpeg,image/jpg,image/png",1,"hidden","opacity-0","absolute","w-0","z-0",3,"change"],["inputFile",""],["for","nombre",1,"w-full","text-center","font-bold","text-orange","my-4","block"],["id","nombre","name","nombre","type","text","placeholder","Nombre(s)","formControlName","name",1,"text-input"],["for","dob",1,"w-full","text-center","font-bold","text-orange","my-4","block"],["id","dob","name","dob","type","date","formControlName","dob",1,"text-input",3,"click","change"],["for","raza",1,"w-full","text-center","font-bold","text-orange","my-4","block"],["name","raza","id","raza","formControlName","raza",1,"text-input",3,"change"],["value","","disabled","",3,"selected"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["name","genero","id","genero","formControlName","genero",1,"text-input"],["selected",""],["value","male"],["value","female"],[1,"form-group","grid","grid-cols-6","gap-4","mt-10"],[1,"col-span-3","mb-20"],["mat-button","","matStepperPrevious","","type","button",1,"single_add_button"],["type","submit",1,"single_add_button_orange"],[1,"col-auto",3,"change"],[3,"for"],["name","especie","type","radio","formControlName","especie",3,"id","value"],[1,"w-8/12","m-auto","rounded-full",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),e._uU(4," Agregar "),e.qZA(),e._uU(5," Mascota "),e.qZA()(),e._UZ(6,"div",4),e.YNc(7,M,81,8,"form",5),e.ALo(8,"async"),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngIf",e.VKq(3,N,e.lcZ(8,1,n.breeds$))))},dependencies:[l.sg,l.O5,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i._,i.JJ,i.JL,i.sg,i.u,c.C0,c.VY,c.Vq,c.Ic,c.fd,l.Ov,C.I],styles:[".mat-horizontal-stepper-header-container{display:none!important}[type=radio][_ngcontent-%COMP%] + img[_ngcontent-%COMP%]{cursor:pointer}[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}[type=radio][_ngcontent-%COMP%]:checked + img[_ngcontent-%COMP%]{outline:3px solid #FCAF3D}label[_ngcontent-%COMP%]:checked{color:red}.text-input[_ngcontent-%COMP%]{box-shadow:inset 0 0 8px #e2dbca;width:100%;border-radius:1rem;padding:.5rem;font-size:1rem;line-height:1.5rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.sizes[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + img[_ngcontent-%COMP%]{outline:none!important;filter:invert(56%) sepia(150%) saturate(451%) hue-rotate(333deg) brightness(99%) contrast(88%)}[type=file][_ngcontent-%COMP%] + img[_ngcontent-%COMP%]{cursor:pointer;left:0;top:0}[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}select#raza[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:first-of-type{font-weight:700}"]}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]}),o})();var z=a(2271);let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,I,z.m,i.UX,c.T5]}),o})()}}]);