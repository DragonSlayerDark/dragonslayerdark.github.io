{"ast":null,"code":"import { Slot } from '@wry/context';\nimport { dep } from 'optimism';\nvar varDep = dep();\nvar cacheSlot = new Slot();\n\nfunction makeVar(value) {\n  var caches = new Set();\n  return function rv(newValue) {\n    if (arguments.length > 0) {\n      if (value !== newValue) {\n        value = newValue;\n        varDep.dirty(rv);\n        caches.forEach(broadcast);\n      }\n    } else {\n      var cache = cacheSlot.getValue();\n      if (cache) caches.add(cache);\n      varDep(rv);\n    }\n\n    return value;\n  };\n}\n\nfunction broadcast(cache) {\n  if (cache.broadcastWatches) {\n    cache.broadcastWatches();\n  }\n}\n\nexport { cacheSlot, makeVar }; //# sourceMappingURL=reactiveVars.js.map","map":null,"metadata":{},"sourceType":"module"}