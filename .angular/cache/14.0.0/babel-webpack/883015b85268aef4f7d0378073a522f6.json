{"ast":null,"code":"import { select } from '@ngrx/store';\nimport { modifyCart, removeProductFromCart } from 'src/app/store/custom/actions/cart.actions';\nimport { getCart, getCartLength } from 'src/app/store/custom/selectors/cart.selectors';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/modules/shared/shared.service\";\nimport * as i4 from \"../../../../store/custom/services/app.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../../shared/pipes/image.pipe\";\n\nfunction MyOrderComponent_ng_container_0_ng_container_2_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 11)(2, \"div\", 12);\n    i0.ɵɵelement(3, \"img\", 13);\n    i0.ɵɵpipe(4, \"image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14)(6, \"div\", 15);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 16);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 17)(12, \"div\", 18)(13, \"div\", 19)(14, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function MyOrderComponent_ng_container_0_ng_container_2_div_6_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.modifyCart(item_r6, false));\n    });\n    i0.ɵɵtext(15, \"-\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 21)(17, \"span\", 22);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 23)(20, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function MyOrderComponent_ng_container_0_ng_container_2_div_6_Template_button_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.modifyCart(item_r6, true));\n    });\n    i0.ɵɵtext(21, \"+\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 24)(23, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MyOrderComponent_ng_container_0_ng_container_2_div_6_Template_button_click_23_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.removeProduct(item_r6.product.id));\n    });\n    i0.ɵɵtext(24, \"Eliminar\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"span\", 26);\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"currency\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(28, \"span\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(4, 6, item_r6.product.attributes[\"image\"].data == null ? null : item_r6.product.attributes[\"image\"].data.attributes == null ? null : item_r6.product.attributes[\"image\"].data.attributes.url), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", item_r6.product.attributes.name, \" (\", item_r6.quantity, \") \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Precio Unitario: \", i0.ɵɵpipeBind1(10, 8, item_r6.product.attributes.subtotal), \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\" \", item_r6.quantity, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"Subtotal \", i0.ɵɵpipeBind1(27, 10, item_r6.product.attributes.subtotal * item_r6.quantity), \" \");\n  }\n}\n\nfunction MyOrderComponent_ng_container_0_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"div\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 6);\n    i0.ɵɵtemplate(6, MyOrderComponent_ng_container_0_ng_container_2_div_6_Template, 29, 12, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 9)(11, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MyOrderComponent_ng_container_0_ng_container_2_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.goToPayment());\n    });\n    i0.ɵɵtext(12, \" Pagar ahora \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const data_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, ctx_r2.cartItemsLength), \" Productos(s) \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", data_r1.products);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Total: \", i0.ɵɵpipeBind1(9, 5, ctx_r2.calculateTotal(data_r1.products)), \" \");\n  }\n}\n\nfunction MyOrderComponent_ng_container_0_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"span\");\n    i0.ɵɵtext(2, \"Sin art\\u00EDculos en el carrito.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 29)(4, \"div\", 30);\n    i0.ɵɵelement(5, \"img\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"a\", 32);\n    i0.ɵɵtext(7, \"Agregar productos.\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction MyOrderComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵtemplate(2, MyOrderComponent_ng_container_0_ng_container_2_Template, 13, 7, \"ng-container\", 2);\n    i0.ɵɵtemplate(3, MyOrderComponent_ng_container_0_ng_template_3_Template, 8, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const data_r1 = ctx.ngIf;\n\n    const _r3 = i0.ɵɵreference(4);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", data_r1.products.length != 0)(\"ngIfElse\", _r3);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    products: a0\n  };\n};\n\nexport let MyOrderComponent = /*#__PURE__*/(() => {\n  class MyOrderComponent {\n    constructor(store, router, shared, App) {\n      this.store = store;\n      this.router = router;\n      this.shared = shared;\n      this.App = App;\n      this.cartItemsLength = this.store.pipe(select(getCartLength));\n      this.products$ = this.store.pipe(select(getCart));\n    }\n\n    ngOnInit() {\n      this.App.onActivate();\n    }\n\n    goToPayment() {\n      this.router.navigate(['/payment']);\n    }\n\n    modifyCart(item, add) {\n      this.store.dispatch(modifyCart({\n        itemID: item.product.id,\n        add\n      }));\n    }\n\n    calculateTotal(products) {\n      return products.reduce((total, item) => total + item.product.attributes.subtotal * item.quantity, 0);\n    }\n\n    removeProduct(productID) {\n      this.shared.sendConfirmation('warning', 'Alerta', 'Este producto será eliminado del carrito').then(res => {\n        if (res.isConfirmed) {\n          this.store.dispatch(removeProductFromCart({\n            productID: productID\n          }));\n          const Swal3 = Swal.mixin({\n            customClass: {\n              container: 'swalcontainer',\n              popup: 'swalpopup',\n              title: 'swaltitle',\n              confirmButton: 'swalbutton swalaccept',\n              cancelButton: 'swalbutton swalcnl'\n            },\n            buttonsStyling: false\n          });\n          Swal3.fire('Producto Eliminado', 'El producto ha sido eliminado de forma exitosa');\n        } else if (res.dismiss || res.isDenied) {\n          const Swal3 = Swal.mixin({\n            customClass: {\n              container: 'swalcontainer',\n              popup: 'swalpopup',\n              title: 'swaltitle',\n              confirmButton: 'swalbutton swalaccept',\n              cancelButton: 'swalbutton swalcnl'\n            },\n            buttonsStyling: false\n          });\n          Swal3.fire('Eliminacion cancelada');\n        }\n      });\n    }\n\n  }\n\n  MyOrderComponent.ɵfac = function MyOrderComponent_Factory(t) {\n    return new (t || MyOrderComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.AppService));\n  };\n\n  MyOrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MyOrderComponent,\n    selectors: [[\"app-my-order\"]],\n    decls: 2,\n    vars: 5,\n    consts: [[4, \"ngIf\"], [1, \"content\", \"content-margintop\", \"rounded-3xl\", \"w-full\", \"pt-6\", \"pb-24\", \"justify-center\", \"box-shadow-base\"], [4, \"ngIf\", \"ngIfElse\"], [\"elseTemplate\", \"\"], [1, \"header-category-items\", \"text-lg\", \"grid\", \"grid-cols-1\"], [1, \"col-span-1\", \"text-yellow\"], [1, \"p-5\", \"grid\", \"grid-cols-1\", \"sm:grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-4\"], [4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"justify-center\", \"p-6\", \"text-orange\", \"font-bold\", \"text-xl\"], [1, \"flex\", \"justify-end\", \"p-4\"], [1, \"single_add_button\", 3, \"click\"], [1, \"grid\", \"grid-cols-12\", \"px-6\", \"py-6\"], [1, \"col-span-3\", \"flex\", \"flex-col\", \"text-center\"], [1, \"m-auto\", \"h-32\", \"w-32\", \"object-cover\", 3, \"src\"], [1, \"col-span-8\", \"flex\", \"flex-col\", \"p-3\", \"px-4\"], [1, \"text-purple\", \"font-bold\", \"text-lg\"], [1, \"text-orange\", \"font-bold\", \"text-md\"], [1, \"grid\", \"grid-cols-2\", \"gap-4\", \"my-6\"], [1, \"col-span-1\", \"grid\", \"grid-cols-6\", \"shadow-lg\", \"rounded-full\"], [1, \"col-span-2\", \"modify_cart_button\", \"rounded-l-full\"], [1, \"p-2\", \"text-white\", 3, \"click\"], [1, \"col-span-2\", \"text-orange\", \"text-center\", \"font-bold\", \"text-md\", \"flex\", \"items-center\", \"justify-center\"], [1, \"text-center\"], [1, \"col-span-2\", \"modify_cart_button\", \"rounded-r-full\"], [1, \"col-span-1\"], [1, \"w-full\", \"p-2\", \"bg-red-500\", \"text-white\", \"font-bold\", \"rounded-full\", 3, \"click\"], [1, \"text-orange\", \"font-bold\", \"text-lg\"], [1, \"divider\", \"w-11/12\", \"mx-auto\", \"h-2\", \"block\", \"rounded-lg\"], [\"routerLink\", \"/shop\", 1, \"p-2\", \"text-orange-300\", \"text-lg\", \"text-center\"], [1, \"flex\", \"justify-center\", \"items-center\", \"my-6\"], [1, \"dashed\", \"col-span-1\", \"h-20\", \"w-20\", \"rounded-full\", \"flex\", \"justify-center\", \"items-center\"], [\"src\", \"assets/Grupo 1239.png\", 1, \"\"], [2, \"text-decoration\", \"underline\", \"font-weight\", \"bold\"]],\n    template: function MyOrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MyOrderComponent_ng_container_0_Template, 5, 2, \"ng-container\", 0);\n        i0.ɵɵpipe(1, \"async\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpureFunction1(3, _c0, i0.ɵɵpipeBind1(1, 1, ctx.products$)));\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i2.RouterLink, i5.AsyncPipe, i5.CurrencyPipe, i6.ImagePipe],\n    styles: [\".dashed[_ngcontent-%COMP%]{background-image:url(\\\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='100' ry='100' stroke='%23FCAF3DFF' stroke-width='10' stroke-dasharray='5%2c 5' stroke-dashoffset='0' stroke-linecap='butt'/%3e%3c/svg%3e\\\");border-radius:100px}\"]\n  });\n  return MyOrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}