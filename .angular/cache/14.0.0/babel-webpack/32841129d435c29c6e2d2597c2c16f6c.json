{"ast":null,"code":"import { filter, map, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { PAWLLocalStorage } from 'src/app/exports/enums';\nimport { loadPets } from 'src/app/store/entities/actions/pet.actions';\nimport { selectAllPets } from 'src/app/store/entities/selectors/pet.selectors';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/auth_services/store/auth.service\";\nimport * as i4 from \"src/app/store/entities/services/pet.service\";\nimport * as i5 from \"../../../store/custom/services/app.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../pipes/image.pipe\";\n\nconst _c0 = function () {\n  return {\n    \"border-color\": \"#45B45A\"\n  };\n};\n\nconst _c1 = function () {\n  return {\n    \"background-image\": \"url(assets/my-pets/bg-g.svg)\"\n  };\n};\n\nfunction PetsComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 9);\n    i0.ɵɵpipe(2, \"image\");\n    i0.ɵɵelement(3, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const selectedPet_r3 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(2, 3, selectedPet_r3.attributes.photo.data == null ? null : selectedPet_r3.attributes.photo.data.attributes == null ? null : selectedPet_r3.attributes.photo.data.attributes.url), i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction0(5, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(6, _c1));\n  }\n}\n\nconst _c2 = function () {\n  return {\n    \"border-color\": \"#b3bdb5\"\n  };\n};\n\nfunction PetsComponent_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵpipe(2, \"image\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const selectedPet_r3 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(2, 2, selectedPet_r3.attributes.photo.data == null ? null : selectedPet_r3.attributes.photo.data.attributes == null ? null : selectedPet_r3.attributes.photo.data.attributes.url), i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction0(4, _c2));\n  }\n}\n\nfunction PetsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function PetsComponent_div_1_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const selectedPet_r3 = restoredCtx.ngIf;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.selectedPets(selectedPet_r3.id, selectedPet_r3.attributes.pet_type.data[\"id\"], selectedPet_r3));\n    });\n    i0.ɵɵtemplate(2, PetsComponent_div_1_div_2_Template, 4, 7, \"div\", 8);\n    i0.ɵɵtemplate(3, PetsComponent_div_1_div_3_Template, 3, 5, \"div\", 8);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const selectedPet_r3 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", selectedPet_r3.attributes.memorial === false || selectedPet_r3.attributes.memorial === null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", selectedPet_r3.attributes.memorial === true);\n  }\n}\n\nfunction PetsComponent_div_5_div_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n    i0.ɵɵpipe(1, \"image\");\n  }\n\n  if (rf & 2) {\n    const pet_r10 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(1, 2, pet_r10.attributes.photo.data == null ? null : pet_r10.attributes.photo.data.attributes == null ? null : pet_r10.attributes.photo.data.attributes.url), i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction0(4, _c0));\n  }\n}\n\nfunction PetsComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PetsComponent_div_5_div_1_img_1_Template, 2, 5, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pet_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pet_r10.attributes.photo);\n  }\n}\n\nfunction PetsComponent_div_5_div_2_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n    i0.ɵɵpipe(1, \"image\");\n  }\n\n  if (rf & 2) {\n    const pet_r10 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(1, 2, pet_r10.attributes.photo.data == null ? null : pet_r10.attributes.photo.data.attributes == null ? null : pet_r10.attributes.photo.data.attributes.url), i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction0(4, _c2));\n  }\n}\n\nfunction PetsComponent_div_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PetsComponent_div_5_div_2_img_1_Template, 2, 5, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pet_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pet_r10.attributes.photo);\n  }\n}\n\nfunction PetsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function PetsComponent_div_5_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const pet_r10 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.selectPet(pet_r10.id, pet_r10.attributes.pet_type.data[\"id\"], pet_r10));\n    });\n    i0.ɵɵtemplate(1, PetsComponent_div_5_div_1_Template, 2, 1, \"div\", 8);\n    i0.ɵɵtemplate(2, PetsComponent_div_5_div_2_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementStart(3, \"div\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const pet_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pet_r10.attributes.memorial === false || pet_r10.attributes.memorial === null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pet_r10.attributes.memorial === true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", pet_r10.attributes.name, \" \");\n  }\n}\n\nconst _c3 = function () {\n  return [\"/add-pet\"];\n};\n\nfunction PetsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17);\n    i0.ɵɵelement(2, \"img\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 19);\n    i0.ɵɵtext(4, \" Agregar \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c3));\n  }\n}\n\nexport let PetsComponent = /*#__PURE__*/(() => {\n  class PetsComponent {\n    constructor(store, router, auth, petService, App) {\n      this.store = store;\n      this.router = router;\n      this.auth = auth;\n      this.petService = petService;\n      this.App = App;\n      this.showAdd = false;\n      this.selectedPet$ = null;\n      this.server = environment.server;\n      this.dataArray$ = of(['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5', 'Item 6', 'Item 7', 'Item 8', 'Item 9']);\n      this.pets$ = this.store.select(selectAllPets).pipe(filter(x => x.length != 0), map(pets => {\n        let selectedPetID = localStorage.getItem(PAWLLocalStorage.SELECTED_PET_ID) || pets[0].id;\n        let modifiedPets = [...pets];\n        let user = JSON.parse(localStorage.getItem(\"usuario\"));\n\n        if (selectedPetID) {\n          // Find the selected pet and remove it from the array\n          let selectedPet = modifiedPets.find(pet => pet.id == selectedPetID);\n          modifiedPets = modifiedPets.filter(pet => pet.id != selectedPet.id);\n        } // Return only the first 2 pets\n\n\n        return modifiedPets;\n      }));\n      this.selectedPet$ = this.store.select(selectAllPets).pipe(tap(pets => console.log(pets[0])), filter(x => x.length != 0), map(pets => {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n        let selectedPetID = localStorage.getItem(PAWLLocalStorage.SELECTED_PET_ID) || pets[0].id;\n        let selectedPet = pets.find(pet => pet.id == selectedPetID);\n        const dob = new Date(selectedPet.attributes.dob);\n        const today = new Date();\n        const timeDiff = today.getTime() - dob.getTime();\n        const weeksDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));\n\n        switch ((_b = (_a = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _a === void 0 ? void 0 : _a.pet_type) === null || _b === void 0 ? void 0 : _b.data['id']) {\n          case \"3\":\n            // perro\n            this.vaccineCardId = weeksDiff <= 17 ? 1 : 3;\n            break;\n\n          case \"2\":\n            // gato\n            this.vaccineCardId = weeksDiff <= 16 ? 2 : 4;\n            break;\n\n          default:\n            this.vaccineCardId = 0; // Set a default value in case pet type is unknown\n\n            break;\n        }\n\n        const petInfo = {\n          petBreedId: (_d = (_c = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _c === void 0 ? void 0 : _c.pet_breed) === null || _d === void 0 ? void 0 : _d.data['id'],\n          petTypeId: (_f = (_e = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _e === void 0 ? void 0 : _e.pet_type) === null || _f === void 0 ? void 0 : _f.data['id'],\n          petSize: (_g = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _g === void 0 ? void 0 : _g.pet_size,\n          dob: (_h = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _h === void 0 ? void 0 : _h.dob,\n          gender: (_j = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _j === void 0 ? void 0 : _j.gender,\n          name: (_k = selectedPet === null || selectedPet === void 0 ? void 0 : selectedPet.attributes) === null || _k === void 0 ? void 0 : _k.name,\n          vaccineCardId: this.vaccineCardId\n        };\n\n        if (localStorage.getItem(PAWLLocalStorage.SELECTED_PET_ID) == null) {\n          localStorage.setItem(PAWLLocalStorage.SELECTED_PET_ID, selectedPet.id + \"\");\n        }\n\n        localStorage.setItem(PAWLLocalStorage.SELECTED_PET, JSON.stringify(petInfo) + \"\");\n        return selectedPet;\n      }));\n    }\n\n    ngOnInit() {\n      this.store.dispatch(loadPets({\n        userID: this.auth.getUser().id // userID: 1\n\n      }));\n      this.App.onActivate();\n      this.hideemptycontainers();\n    }\n\n    selectedPets(petId, petTypeId, pet) {\n      this.router.navigate(['/my-pets', 'list', petId]);\n      this.petService.setPet(petId = petId, petTypeId = petTypeId);\n    }\n\n    selectPet(petId, petTypeId, pet) {\n      this.petService.setPet(petId = petId, petTypeId = petTypeId);\n      this.router.navigate(['/my-pets', 'list', petId]);\n      this.ngOnInit();\n    }\n\n    hideemptycontainers() {\n      const elements = document.querySelectorAll(`.group-container`);\n      elements.forEach(element => {\n        // Type assertion to HTMLDivElement\n        const divElement = element;\n\n        if (divElement.innerHTML.trim() === '') {\n          divElement.style.display = \"none\";\n          console.log('vacios');\n        }\n      });\n    }\n\n  }\n\n  PetsComponent.ɵfac = function PetsComponent_Factory(t) {\n    return new (t || PetsComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.PetService), i0.ɵɵdirectiveInject(i5.AppService));\n  };\n\n  PetsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PetsComponent,\n    selectors: [[\"app-pets\"]],\n    inputs: {\n      showAdd: \"showAdd\"\n    },\n    decls: 8,\n    vars: 7,\n    consts: [[1, \"grid\", \"grid-cols-12\", \"gap-4\", \"m-3\"], [\"class\", \"col-span-6\", 4, \"ngIf\"], [1, \"col-span-6\", \"flex\", \"items-center\", \"justify-center\"], [1, \"flex\", \"gap-3\"], [\"class\", \" text-center font-bold text-gray-500\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center font-bold text-gray-500\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"col-span-6\"], [1, \"w-full\", \"rounded-full\", \"flex\", \"justify-center\", \"items-center\", \"relative\", 3, \"click\"], [4, \"ngIf\"], [1, \"h-36\", \"w-36\", \"rounded-full\", \"border-4\", \"object-top\", \"object-cover\", \"z-50\", \"relative\", \"bg-white\", 3, \"src\", \"ngStyle\"], [1, \"status\", \"h-10\", \"w-10\", \"bg-contain\", \"bottom-0\", \"absolute\", 2, \"right\", \"18px\", 3, \"ngStyle\"], [1, \"h-36\", \"w-36\", \"rounded-full\", \"border-4\", \"object-top\", \"object-cover\", \"z-10\", 3, \"src\", \"ngStyle\"], [1, \"text-center\", \"font-bold\", \"text-gray-500\", 3, \"click\"], [1, \"mt-3\", 2, \"color\", \"#937195\"], [\"class\", \"h-20 w-20 rounded-full object-cover border-4 object-top  bg-white\", 3, \"src\", \"ngStyle\", 4, \"ngIf\"], [1, \"h-20\", \"w-20\", \"rounded-full\", \"object-cover\", \"border-4\", \"object-top\", \"bg-white\", 3, \"src\", \"ngStyle\"], [1, \"text-center\", \"font-bold\", \"text-gray-500\", 3, \"routerLink\"], [1, \"dashed\", \"h-20\", \"w-20\", \"rounded-full\", \"flex\", \"justify-center\", \"items-center\"], [\"src\", \"assets/Grupo 1239.png\"], [1, \"mt-3\", 2, \"color\", \"#FCAF3D\"]],\n    template: function PetsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, PetsComponent_div_1_Template, 4, 2, \"div\", 1);\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n        i0.ɵɵtemplate(5, PetsComponent_div_5_Template, 5, 3, \"div\", 4);\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵtemplate(7, PetsComponent_div_7_Template, 5, 2, \"div\", 5);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 3, ctx.selectedPet$));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 5, ctx.pets$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.showAdd);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i6.NgStyle, i2.RouterLink, i6.AsyncPipe, i7.ImagePipe],\n    styles: [\".dashed[_ngcontent-%COMP%]{background-image:url(\\\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='100' ry='100' stroke='%23FCAF3DFF' stroke-width='10' stroke-dasharray='5%2c 5' stroke-dashoffset='0' stroke-linecap='butt'/%3e%3c/svg%3e\\\");border-radius:100px}\"]\n  });\n  return PetsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}